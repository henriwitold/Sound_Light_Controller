#include "melody.h"
#include "DMX_MIDI.h"
#include "projecteurs.h"
#include "controleurs.h"
#include "Fonctions.h"

int clairlune[11][3] = { {0,2,1}, {0,2,1}, {0,2,1}, {2,2,1}, {4,2,2}, {2,2,2}, {0,2,1}, {4,2,1,}, {2,2,1}, {2,2,1}, {0,2,4}};
int clairluneRGB[11][3] = { {255,0,0}, {255,0,0}, {255,0,0}, {127,255,0}, {255,0,127}, {127,255,0}, {255,0,0}, {255,0,127}, {127,255,0}, {127,255,0}, {255,0,0}};

int supop[15][3] = {{7,2,3},{7,2,1},{7,2,1},{7,2,1},{5,2,3}, {5,2,1}, {5,2,1}, {5,2,1}, {4,2,3}, {4,2,1}, {4,2,1}, {4,2,1}, {3,2,3}, {5,2,3}, {7,2,3}};
int supopRGB[15][3] = {{127,255,127},{127,255,127},{127,255,127},{127,255,127}, {255,0,127}, {255,0,127}, {255,0,127}, {255,0,127}, {255,0,127}, {255,0,127}, {255,0,127}, {255,0,127}, {0,255,0}, {255,0,127}, {127,255,127}};

int symphonie[8][3] = {{7,2,1},{7,2,1},{7,2,1},{3,2,8},{5,2,1},{5,2,1},{5,2,1},{2,2,8}};
int symphonieRGB[8][3] = {{127,255,127},{127,255,127},{127,255,127},{0,255,0},{255,0,127},{255,0,127},{255,0,127},{127,255,0}};

int mario[7][3] = {{4,2,1},{4,2,2},{4,2,2},{0,2,1},{4,2,2},{7,2,4},{7,1,3}};
int marioRGB[7][3] = {{255,0,127},{255,0,127},{255,0,127},{255,0,0},{255,0,127},{127,255,127},{0,255,127}};

int ymca[4][3] = {{4,2,6},{2,2,3},{4,2,1},{2,2,1}};
int ymcaRGB[4][3] = {{255,0,127},{127,255,0},{255,0,127},{127,255,0}};

int thriller[5][3] = {{11,2,2},{9,2,4},{9,2,2},{8,2,2},{5,2,4}};
int thrillerRGB[5][3] = {{0,127,127},{127,0,255},{127,0,255},{0,255,127},{255,0,127}};

int christmas[9][3] = {{11,2,2},{9,2,2},{7,2,2},{4,2,2},{3,2,2},{9,2,4},{11,2,2},{9,2,1},{7,2,8}};
int christmasRGB[9][3] = {{0,127,127},{127,0,255},{127,255,127},{255,0,127},{0,255,0},{127,0,255},{0,127,127},{127,0,255},{127,255,127}};

int papanoel[6][3] = {{3,2,2},{7,2,2},{7,2,2},{7,2,2},{9,2,2},{7,2,4}};
int papanoelRGB[6][3] = {{0,255,0},{127,255,127},{127,255,127},{127,255,127},{127,0,255},{127,255,127}};

int wakemeup[8][3] = {{4,2,1},{7,2,2},{9,2,4},{4,2,1},{7,2,2},{9,2,1},{4,2,2},{1,2,1}};
int wakemeupRGB[8][3] = {{255,0,127},{127,255,127},{127,0,255},{255,0,127},{127,255,127},{127,0,255},{255,0,127},{255,0,0}};

int rickroll[16][3] = {{2,2,1},{4,2,1},{7,2,1},{4,2,1},{11,2,2},{11,2,2},{9,2,2},{2,2,1},{4,2,1},{7,2,1},{4,2,1},{9,2,2},{9,2,2},{7,2,2},{5,2,1},{4,2,1}};
int rickrollRGB[16][3] = {{127,255,0},{255,0,127},{127,255,127},{255,0,127},{0,127,255},{0,127,127},{127,0,255},{127,255,0},{255,0,127},{127,255,127},{255,0,127},{127,0,255},{127,0,255},{127,255,127},{255,0,127},{255,0,127}};

int marcheimp[9][3] = {{7,2,4},{7,2,4},{7,2,4},{3,2,3},{10,2,1},{7,2,4},{3,2,3},{10,2,1},{7,2,4}};
int marcheimpRGB[9][3] = {{127,255,127},{127,255,127},{127,255,127},{0,255,0},{127,127,255},{127,255,127},{0,255,0},{127,127,255},{127,255,127}};

int starwars[16][3] = {{1,2,4}, {7,2,4}, {5,2,1}, {4,2,1}, {2,2,1}, {7,3,4}, {0,3,2}, {5,2,1}, {4,2,1}, {2,2,1}, {7,3,4}, {0,3,2}, {5,2,1}, {4,2,1}, {5,2,1}, {2,2,4}};
int starwarsRGB[16][3] = {{255,0,0}, {127,255,127}, {255,0,127}, {255,0,127}, {127,255,0}, {127,255,127}, {255,0,0}, {255,0,127}, {255,0,127}, {127,255,0}, {127,255,127}, {255,0,0}, {255,0,127}, {255,0,127}, {255,0,127}, {255,127,0}};

int jurassic[10][3] = {{10,3,1}, {9,3,1}, {10,3,2}, {5,3,2}, {3,3,2}, {10,3,1}, {9,3,1}, {10,3,2}, {5,3,2}, {3,3,2}};
int jurassicRGB[10][3] = {{127,127,255}, {127,0,255}, {127,127,255}, {255,0,127}, {127,255,0}, {127,127,255}, {127,0,255}, {127,127,255}, {255,0,127}, {127,255,0}};

int panthrose[17][3] = {{1,2,1}, {2,2,1}, {3,2,1}, {4,2,3}, {6,2,1}, {7,2,3}, {3,2,1}, {4,2,1}, {6,2,1}, {7,2,1}, {11,2,1}, {10,2,6}, {9,2,1}, {7,2,1}, {4,2,1}, {2,2,1}, {4,2,4}  };
int panthroseRGB[17][3] = {{255,127,0}, {127,255,0}, {0,255,0}, {255,0,127}, {255,127,127}, {127,255,127}, {0,255,0}, {255,0,127}, {255,127,127}, {127,255,127}, {0,127,127}, {127,127,255}, {127,0,255}, {127,255,127}, {255,0,127}, {127,255,0}, {255,0,127}};

int simpson[10][3] = {{0,2,3},{4,2,2},{6,2,2},{9,2,1},{7,2,3},{4,2,2},{0,2,2},{9,1,1},{1,2,3},{7,2,3}};
int simpsonRGB[10][3] = {{255,0,0},{255,0,127},{127,255,127},{127,127,255},{0,255,127},{255,0,127},{255,0,0},{127,127,255},{127,255,127},{0,255,127}};

int gadget[10][3] = {{2,2,1}, {3,2,1}, {5,2,1}, {7,2,1}, {9,2,2}, {5,2,2}, {8,2,2}, {3,2,2}, {7,2,2}, {5,2,4}};
int gadgetRGB[10][3] = {{127,255,0}, {255,0,127}, {255,0,127}, {127,255,127}, {127,0,255}, {255,0,127}, {0,255,127}, {255,0,127}, {127,255,127}, {255,0,127}};

void joueMelodie(int n, int melodie[n][3], int couleurs[n][3]) {
    for (int i = 0; i<n; i++){
        for(int j=0; j<4; j++){
            ChangementValeurs(10, 0, 0, 255, couleurs[i][0], couleurs[i][1], couleurs[i][2]);
            MaJProjecteurs(j);}
        attente(7 - tempo / 100);
        int laNote= melodie[i][0]; // Pour chaque note de la mélodie, on reprend la note de la gamme,
        int octave= melodie[i][1]; // l'octave de la note,
        int duree= melodie[i][2]; // et la durée de la note
        sortieSon.period(1.0/note[laNote]/(octave * 1.0));
        sortieSon =volume; //rapport cyclique de 50% =>  volume maximal
        wait_us(1000000*duree*.9*60.0/tempo);
        sortieSon=0.0; // rapport cyclique 0%:  volume nul
        for(int j=0; j<4; j++){
            ChangementValeurs(10, 0, 0, 0, couleurs[i][0], couleurs[i][1], couleurs[i][2]);
            MaJProjecteurs(j);}
        wait_us(1000000*duree*.1*60.0/tempo);
    }
}

